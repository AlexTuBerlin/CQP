(function(d,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis!="undefined"?globalThis:d||self,e(d.VueTabs={},d.Vue))})(this,function(d,e){"use strict";var h=(t,o)=>{const a=t.__vccOpts||t;for(const[i,c]of o)a[i]=c;return a};const p={name:"Tab",props:{panelClass:{type:String,default:"tabs-component-panel"},id:{type:String,default:null},name:{type:String,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},isDisabled:{type:Boolean,default:!1}},setup(t){const o=e.ref(!1),a=e.inject("tabsProvider"),i=e.inject("addTab"),c=e.inject("updateTab"),l=e.inject("deleteTab"),n=t.prefix+t.name+t.suffix,s=t.id?t.id:t.name.toLowerCase().replace(/ /g,"-"),r="#"+(t.isDisabled?"":s);return e.watch(()=>a.activeTabHash,()=>{o.value=r===a.activeTabHash}),e.watch(()=>Object.assign({},t),()=>{c(s,{name:t.name,header:t.prefix+t.name+t.suffix,isDisabled:t.isDisabled,hash:r,index:a.tabs.length,computedId:s})}),e.onBeforeMount(()=>{i({name:t.name,header:n,isDisabled:t.isDisabled,hash:r,index:a.tabs.length,computedId:s})}),e.onBeforeUnmount(()=>{l(s)}),{header:n,computedId:s,hash:r,isActive:o}}},g=["id","aria-hidden"];function T(t,o,a,i,c,l){return e.withDirectives((e.openBlock(),e.createElementBlock("section",{id:i.computedId,ref:"tab","aria-hidden":!i.isActive,class:e.normalizeClass(a.panelClass),role:"tabpanel"},[e.renderSlot(t.$slots,"default")],10,g)),[[e.vShow,i.isActive]])}var f=h(p,[["render",T]]);class v{get(o){const a=JSON.parse(localStorage.getItem(o));return a?new Date(a.expires)<new Date?(localStorage.removeItem(o),null):a.value:null}set(o,a,i){const c=new Date().getTime(),l=new Date(c+i*6e4);localStorage.setItem(o,JSON.stringify({value:a,expires:l}))}}var b=new v;const C={props:{cacheLifetime:{type:Number,default:5},options:{type:Object,required:!1,default:()=>({useUrlFragment:!0,defaultTabHash:null,disableScrollBehavior:!1})},wrapperClass:{type:String,default:"tabs-component"},panelsWrapperClass:{type:String,default:"tabs-component-panels"},navClass:{type:String,default:"tabs-component-tabs"},navItemClass:{type:String,default:"tabs-component-tab"},navItemDisabledClass:{type:String,default:"is-disabled"},navItemActiveClass:{type:String,default:"is-active"},navItemLinkClass:{type:String,default:"tabs-component-tab-a"},navItemLinkActiveClass:{type:String,default:"is-active"},navItemLinkDisabledClass:{type:String,default:"is-disabled"}},emits:["changed","clicked"],setup(t,o){const a=e.reactive({activeTabHash:"",lastActiveTabHash:"",tabs:[]});e.provide("tabsProvider",a),e.provide("addTab",l=>{a.tabs.push(l)}),e.provide("updateTab",(l,n)=>{let s=a.tabs.findIndex(r=>r.computedId===l);n.isActive=a.tabs[s].isActive,a.tabs[s]=n}),e.provide("deleteTab",l=>{let n=a.tabs.findIndex(s=>s.computedId===l);a.tabs.splice(n,1)});const i=(l,n)=>{n&&(!t.options.useUrlFragment||t.options.disableScrollBehavior)&&n.preventDefault();const s=c(l);if(!s)return;if(n&&s.isDisabled){n.preventDefault();return}if(a.lastActiveTabHash===s.hash){o.emit("clicked",{tab:s});return}a.tabs.forEach(u=>{u.isActive=u.hash===s.hash}),o.emit("changed",{tab:s}),a.lastActiveTabHash=a.activeTabHash=s.hash;const r=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`;b.set(r,s.hash,t.cacheLifetime)},c=l=>a.tabs.find(n=>n.hash===l);return e.onMounted(()=>{if(!a.tabs.length)return;if(window.addEventListener("hashchange",()=>i(window.location.hash)),c(window.location.hash)){i(window.location.hash);return}const l=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`,n=b.get(l);if(c(n)){i(n);return}if(t.options.defaultTabHash&&c("#"+t.options.defaultTabHash)){i("#"+t.options.defaultTabHash);return}i(a.tabs[0].hash)}),{...e.toRefs(a),selectTab:i,findTab:c}}},S=["aria-controls","aria-selected","href","onClick","innerHTML"];function w(t,o,a,i,c,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(a.wrapperClass)},[e.createElementVNode("ul",{role:"tablist",class:e.normalizeClass(a.navClass)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tabs,(n,s)=>(e.openBlock(),e.createElementBlock("li",{key:s,class:e.normalizeClass([a.navItemClass,n.isDisabled?a.navItemDisabledClass:"",n.isActive?a.navItemActiveClass:""]),role:"presentation"},[e.createElementVNode("a",{role:"tab",class:e.normalizeClass([a.navItemLinkClass,n.isDisabled?a.navItemLinkDisabledClass:"",n.isActive?a.navItemLinkActiveClass:""]),"aria-controls":n.hash,"aria-selected":n.isActive,href:n.hash,onClick:r=>i.selectTab(n.hash,r),innerHTML:n.header},null,10,S)],2))),128))],2),e.createElementVNode("div",{class:e.normalizeClass(a.panelsWrapperClass)},[e.renderSlot(t.$slots,"default")],2)],2)}var m=h(C,[["render",w]]),I={install(t){t.component("tab",f),t.component("tabs",m)}};d.Tab=f,d.Tabs=m,d.default=I,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
